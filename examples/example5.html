

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Designing and optimizing interplanetary trajectories &mdash; PyGMO 1.1.5 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  

    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:'../',
        VERSION:'1.1.5',
        COLLAPSE_INDEX:false,
        FILE_SUFFIX:'.html',
        HAS_SOURCE:  true
      };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
    <script type="text/javascript">
        jQuery(function () {
            SphinxRtdTheme.StickyNav.enable();
        });
    </script>
  

  
    <link rel="top" title="PyGMO 1.1.5 documentation" href="../index.html"/>
        <link rel="up" title="Examples" href="index.html"/>
        <link rel="next" title="Participating to the CEC2013 Competition (v 1.1.5)" href="example6.html"/>
        <link rel="prev" title="Multi-objective optimization in the asynchronous island model" href="example4.html"/> 

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../index.html" class="fa fa-home"> PyGMO</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../install.html">Install PyGMO</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../install.html#preparing-your-system-to-compile-pygmo">Preparing your system to compile PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#download-pygmo-code">Download PyGMO code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#compiling-and-installing-under-unix">Compiling and Installing under Unix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../install.html#compiling-and-installing-under-windows">Compiling and Installing under Windows</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quick Start</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#on-one-cpu">On one CPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#on-many-cpus">On many CPUs ...</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#and-migrating-solutions">... and migrating solutions ...</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickstart.html#and-between-different-algorithms">... and between different algorithms ...</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/adding_problems_and_algorithms_to_PyGMO.html">Adding new problems and algorithms to PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/meta_problems_meta_algorithms.html">Meta-problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/multi_objective_optimization_with_PyGMO.html">Multi Objective Optimization with PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/hypervolumes_in_PyGMO.html">Hypervolumes with PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/dealing_with_constraints_in_PyGMO.html">Dealing with constraints in PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/racing.html">Racing in PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/tsp.html">Traveling Salesman Problems with PyGMO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials/landscape_analysis_with_DrPyGMO.html">Landscape Analysis using Dr. PyGMO</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="example1.html">A study on Mixing Variants of Differential Evolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="example2.html">Monitoring the Information Flow in a large archipelago</a></li>
<li class="toctree-l2"><a class="reference internal" href="example3.html">Testing Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="example4.html">Multi-objective optimization in the asynchronous island model</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Designing and optimizing interplanetary trajectories</a></li>
<li class="toctree-l2"><a class="reference internal" href="example6.html">Participating to the CEC2013 Competition (v 1.1.5)</a></li>
<li class="toctree-l2"><a class="reference internal" href="example7.html">Travelling Salesman Problem for Active Space Debris Removal</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/index.html">User Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../documentation/individual.html">Individual and Champion</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/population.html">Population</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/migration.html">Migration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/topology.html">Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/island.html">Island and Archipelago</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/algorithms.html">Algorithms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/problems.html">Problems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/hypervolume.html">Hypervolume</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/racing.html">Racing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../documentation/analysis.html">Dr. PyGMO - Analysis Module</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="http://esa.github.io/pagmo/">PaGMO API</a></li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">PyGMO</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="index.html">Examples</a> &raquo;</li>
      
    <li>Designing and optimizing interplanetary trajectories</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../_sources/examples/example5.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="designing-and-optimizing-interplanetary-trajectories">
<h1>Designing and optimizing interplanetary trajectories<a class="headerlink" href="#designing-and-optimizing-interplanetary-trajectories" title="Permalink to this headline">Â¶</a></h1>
<p>PyGMO can be used to optimize spacecraft trajectories by using the MGA-1DSM
problem. An instance of this problem contains the sequence of planets, you want to visit
with your spacecraft as well as its launch window, its starting velocity and bounds for the time of flight.
Between each planetary encounters, a deep space manouver can be performed. The objective
is to lower the total Delta-V spend for the travel, as this corresponds directly
to the mass of fuel needed.</p>
<p><strong>NOTE:</strong> Even though this example will work with PyGMO, you need to install <a class="reference external" href="http://keptoolbox.sourceforge.net/">PyKEP</a>
in order to use other values than the default.</p>
<p>Lets launch PyGMO and start by creating the default problem:</p>
<div class="highlight-bash"><div class="highlight"><pre>ipython --pylab
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PyGMO</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">alg</span> <span class="o">=</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">jde</span><span class="p">(</span><span class="n">memory</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">prob</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">mga_1dsm_tof</span><span class="p">()</span>
</pre></div>
</div>
<p>By default the sequence is Earth - Venus - Earth, so there are two &#8220;legs&#8221; (1. Earth to Venus and 2. Venus to Earth) to optimize
at the same time. By default we give a minimum of 50 and a maximum of 900 days to each leg. If you don&#8217;t believe this, check for yourself:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">prob</span><span class="o">.</span><span class="n">get_sequence</span><span class="p">()</span>
<span class="n">prob</span><span class="o">.</span><span class="n">get_tof</span><span class="p">()</span>
</pre></div>
</div>
<p>There are also default values for the other parameters, but you don&#8217;t have to worry about those details. This version of the problem mga_1dsm_tof (see: <a class="reference internal" href="../documentation/problems.html#PyGMO.problem.mga_1dsm_tof" title="PyGMO.problem.mga_1dsm_tof"><tt class="xref py py-class docutils literal"><span class="pre">PyGMO.problem.mga_1dsm_tof</span></tt></a>)
is particularly useful if you know some bounds on the travel time for your legs. If you have no clue though, you can use the problem mga_1dsm_alpha (see: <a class="reference internal" href="../documentation/problems.html#PyGMO.problem.mga_1dsm_alpha" title="PyGMO.problem.mga_1dsm_alpha"><tt class="xref py py-class docutils literal"><span class="pre">PyGMO.problem.mga_1dsm_alpha</span></tt></a>)
instead where you can specify just the bounds for the overall time of flight with the tof keyword.
The alpha-version is also particularly useful for multi-objective optimization. By using the multi_objective keyword as an argument
you can instantiate the problem with two objectives (Delta-V and total time of flight) instead of just one (Delta-V).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># initialize the trajectory problem to design a tour within 1 to 5 years</span>
<span class="n">prob_alpha</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">mga_1dsm_alpha</span><span class="p">(</span><span class="n">tof</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span> <span class="o">*</span> <span class="mf">365.25</span><span class="p">,</span> <span class="mi">5</span> <span class="o">*</span> <span class="mf">365.25</span><span class="p">],</span> <span class="n">multi_objective</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>For the remainder of this example, lets return to the original single-objective problem and start some optimizations runs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">l</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
    <span class="n">archi</span> <span class="o">=</span> <span class="n">archipelago</span><span class="p">(</span><span class="n">alg</span><span class="p">,</span><span class="n">prob</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="n">topology</span> <span class="o">=</span> <span class="n">topology</span><span class="o">.</span><span class="n">fully_connected</span><span class="p">())</span>
    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
        <span class="n">archi</span><span class="o">.</span><span class="n">evolve</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">print</span> <span class="nb">min</span><span class="p">([</span><span class="n">isl</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">champion</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">isl</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">])</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="p">[</span><span class="n">isl</span> <span class="k">for</span> <span class="n">isl</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">];</span> <span class="n">tmp</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">champion</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tmp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">champion</span><span class="p">)</span>
<span class="k">print</span> <span class="s">&quot;Results: </span><span class="se">\n</span><span class="s">&quot;</span>
<span class="k">print</span> <span class="p">[</span><span class="n">ch</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">l</span><span class="p">]</span>
</pre></div>
</div>
<p>We may then plot the trajectory and look at some additional informations:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># sort list and extract chromosome of the solution of lowest Delta-V</span>
<span class="n">l</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">x_so</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span>
<span class="n">prob</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_so</span><span class="p">)</span>
<span class="k">print</span> <span class="n">prob</span><span class="o">.</span><span class="n">pretty</span><span class="p">(</span><span class="n">x_so</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/ex5_traj_tof.png" src="../_images/ex5_traj_tof.png" />
<p>That looks nice! Now we are interested in a trade-off between the Delta-V and the the total time of travel. We will use this solution (x_so)
of a low Delta-V and inject it into a new population. This will help when we optimize the population by a multi-objective optimizer for
low Delta-V and short time of travel at the same time, building up an approximation of the Pareto-front. For this, we reinitialize the problem to be
multi-objective and change the algorithm.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">alg</span> <span class="o">=</span> <span class="n">algorithm</span><span class="o">.</span><span class="n">nsga_II</span><span class="p">()</span>
<span class="n">prob</span> <span class="o">=</span> <span class="n">problem</span><span class="o">.</span><span class="n">mga_1dsm_tof</span><span class="p">(</span><span class="n">multi_objective</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>We will use the island model to improve the overall optimization. Each island works just on a small fraction of solutions and
is thus faster as when operating on a single large population.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">sel</span> <span class="o">=</span> <span class="n">migration</span><span class="o">.</span><span class="n">best_s_policy</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">rep</span> <span class="o">=</span> <span class="n">migration</span><span class="o">.</span><span class="n">fair_r_policy</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">archi</span> <span class="o">=</span> <span class="n">archipelago</span><span class="p">(</span><span class="n">topology</span> <span class="o">=</span> <span class="n">topology</span><span class="o">.</span><span class="n">fully_connected</span><span class="p">())</span>
<span class="n">pop</span> <span class="o">=</span> <span class="n">population</span><span class="p">(</span><span class="n">prob</span><span class="p">,</span><span class="mi">39</span><span class="p">)</span>
<span class="c"># we inject the solution of the single-objective optimization here to get a population of 100</span>
<span class="n">pop</span><span class="o">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">x_so</span><span class="p">)</span>
<span class="n">isl</span> <span class="o">=</span> <span class="n">island</span><span class="p">(</span><span class="n">alg</span><span class="p">,</span><span class="n">pop</span><span class="p">,</span><span class="n">s_policy</span><span class="o">=</span><span class="n">sel</span><span class="p">,</span> <span class="n">r_policy</span><span class="o">=</span><span class="n">rep</span><span class="p">)</span>
<span class="n">archi</span><span class="o">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">isl</span><span class="p">)</span>
<span class="c"># we fill up the archipelago with 9 other island initialized by random without injection</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
    <span class="n">archi</span><span class="o">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">island</span><span class="p">(</span><span class="n">alg</span><span class="p">,</span><span class="n">prob</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="n">s_policy</span><span class="o">=</span><span class="n">sel</span><span class="p">,</span> <span class="n">r_policy</span><span class="o">=</span><span class="n">rep</span><span class="p">))</span>
<span class="n">archi</span><span class="o">.</span><span class="n">evolve</span><span class="p">(</span><span class="mi">40</span><span class="p">)</span>
<span class="n">archi</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
</div>
<p>The injected solution will spread by migration to all other islands in the archipelago. After enough generations,
all islands should have converged to similar fronts. Lets put them all together in a single population and have a
look at the Pareto-front:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">pop</span> <span class="o">=</span> <span class="n">population</span><span class="p">(</span><span class="n">prob</span><span class="p">)</span>
<span class="k">for</span> <span class="n">isl</span> <span class="ow">in</span> <span class="n">archi</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">isl</span><span class="o">.</span><span class="n">population</span><span class="p">:</span>
        <span class="n">pop</span><span class="o">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">ind</span><span class="o">.</span><span class="n">cur_x</span><span class="p">)</span>
<span class="n">pop</span><span class="o">.</span><span class="n">plot_pareto_fronts</span><span class="p">()</span>
<span class="c"># highlight the solutions of the 1st island with red</span>
<span class="n">archi</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">plot_pareto_fronts</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="n">ylabel</span><span class="p">(</span><span class="s">&#39;total travelling time in days&#39;</span><span class="p">)</span>
<span class="n">xlabel</span><span class="p">(</span><span class="s">&#39;total Delta-V in m/s&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/ex5_pareto.png" src="../_images/ex5_pareto.png" />
<p>You see a discontinuity in this picture which is very interesting: It allows you to save over a year of travelling time by
just using a bit more Delta-V around 4709 m/s.</p>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="example6.html" class="btn btn-neutral float-right" title="Participating to the CEC2013 Competition (v 1.1.5)"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="example4.html" class="btn btn-neutral" title="Multi-objective optimization in the asynchronous island model"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, Dario Izzo and Francesco Biscani.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  

</body>
</html>